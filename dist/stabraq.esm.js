/* @khalidvsalah | Stabraq | v1.0.0 | MIT License | https://github.com/khalidvsalah/stabraq | https://www.khalidsalah.com */var x=t=>3*t,Q=(t,e)=>1-x(e)+x(t),U=(t,e)=>x(e)-6*t,q=(t,e,s)=>((Q(e,s)*t+U(e,s))*t+x(e))*t;function Z(t,e,s){return x(Q(e,s))*Math.pow(t,2)+2*U(e,s)*t+x(e)}var qt=(t,e,s,i,r)=>{let o=0,l=0,n=0;do l=e+(s-e)/2,o=q(l,i,r)-t,o>0?s=l:e=l;while(Math.abs(o)>1e-7&&++n<10);return l},Pt=(t,e,s,i)=>{for(let r=0;r<4;++r){let o=Z(e,s,i);if(o===0)return e;e-=(q(e,s,i)-t)/o}return e},Ct=t=>{let e=t[0],s=t[1],i=t[2],r=t[3];if(e===s&&i===r)return L.l;let o=new Float32Array(11);for(let n=0;n<11;++n)o[n]=q(n*.1,e,i);function l(n){let a=0,p=1;for(;p!==10&&o[p]<=n;++p)a+=.1;--p;let u=(n-o[p])/(o[p+1]-o[p]),m=a+u*.1,c=Z(m,e,i);return c>=.001?Pt(n,m,e,i):c===0?m:qt(n,a,a+.1,e,i)}return n=>n===0||n===1?n:q(l(n),s,r)},L={custom:Ct,l:t=>t,i1:t=>1-Math.cos(t*Math.PI/2),o1:t=>Math.sin(t*Math.PI/2),io1:t=>-(Math.cos(Math.PI*t)-1)/2,i2:t=>Math.pow(t,2),o2:t=>1-(1-t)*(1-t),io2:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,i3:t=>Math.pow(t,3),o3:t=>1-Math.pow(1-t,3),io3:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,i4:t=>Math.pow(t,4),o4:t=>1-Math.pow(1-t,4),io4:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,i5:t=>Math.pow(t,5),o5:t=>1-Math.pow(1-t,5),io5:t=>t<.5?16*Math.pow(t,5):1-Math.pow(-2*t+2,5)/2,i6:t=>t===0?0:Math.pow(2,10*t-10),o6:t=>t===1?1:1-Math.pow(2,-10*t),io6:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,i7:t=>1-Math.sqrt(1-Math.pow(t,2)),o7:t=>sqrt(1-Math.pow(t-1,2)),io7:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2},h=t=>typeof t=="object"?L.custom(t):L[t];var d=(t,e,s)=>Math.min(Math.max(t,s),e),y=(t,e,s)=>(1-s)*t+s*e,P=(t,e,s)=>d(0,1,(s-t)/(e-t)),Tt=(t,e,s,i,r)=>P(t,e,r)*(i-s)+s,H=(t,e)=>{let s=e?Math.pow(10,e):100;return Math.round(t*s)/s},Yt=(t,e)=>Math.sqrt(t**2+e**2),C=(t,e,s,i=.50399)=>y(t,e,1-Math.exp(-s*i));var Ft=(t,e)=>window.hasOwnProperty.call(t,e),T=t=>JSON.stringify(t);var V=t=>{let e=t.getBoundingClientRect();return{w:e.width,h:e.height,x:e.x,y:e.y,xE:e.right,yE:e.bottom}},Y=t=>{var e=t.offsetWidth,s=t.offsetHeight,i=t.offsetLeft,r=t.offsetTop;return{w:e,h:s,x:i,xE:i+e,y:r,yE:r+s}},E=t=>window.getComputedStyle(t);var Dt={get screen(){return{w:window.innerWidth,h:window.innerHeight}},html:document.html,body:document.body},k=Dt;var Lt={alpha:(t,e)=>t.style.opacity=e,display:(t,e)=>t.style.display=e,pointer:(t,e)=>t.style.pointerEvents=e,position:(t,e)=>t.style.position=e,visible:(t,e)=>t.style.visibility=e,form:(t,e,s,i)=>t.style.transform=`translate3d(${s+e},${i+e},0)`},w=Lt;var Ht={id:t=>document.getElementById(t),el:t=>document.querySelector(t),els:t=>[...document.querySelectorAll(t)],sEl:(t,e)=>t.querySelector(e),sEls:(t,e)=>[...t.querySelectorAll(e)],node:t=>document.createElement(t),text:t=>document.createTextNode(t)},g=Ht;var M=class{#t=0;constructor({d:e,cb:s}){this.d=e*1e3,this.cb=s}run(){clearTimeout(this.#t),this.#t=setTimeout(this.cb,this.d)}};var Nt=(t,{opacity:e,easing:s})=>{let i={s:+e,e:t[0],ease:t[1]?h(t[1]):s};return i.lerp=i.e-i.s,r=>`${i.s+i.lerp*i.ease(r)}`},Ot=(t,e)=>t.style.opacity=e,tt={cb:Nt,setValue:Ot};var It=(t,{filter:e,easing:s})=>{let i;return e==="none"?i={s:0,e:t[0]}:i={s:+e.match(/(\d.*)px/)[1],e:t[0]},i.lerp=i.e-i.s,i.ease=t[1]?h(t[1]):s,r=>i.s+i.lerp*i.ease(r)},Wt=(t,e)=>t.style.filter=`blur(${e}px)`,et={cb:It,setValue:Wt};var N={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},At=/([astvzqmhlc])([^astvzqmhlc]*)/gi,jt=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function Bt(t){let e=t.match(jt);return e?e.map(Number):[]}function st(t){let e=[];return t.replace(At,function(s,i,r){let o=i.toLowerCase();for(r=Bt(r),o==="m"&&r.length>2&&(e.push([i].concat(r.splice(0,2))),o="l",i=i==="m"?"l":"L");;){if(r.length===N[o])return r.unshift(i),e.push(r);if(r.length<N[o])throw new Error("malformed path data");e.push([i].concat(r.splice(0,N[o])))}}),e}var Xt=(t,{el:e,easing:s})=>{let i=st(e.getAttribute("d")),r=st(t[0]),o=t[1]?h(t[1]):s;return l=>{let n="",a="";for(let p=0;p<i.length;p++){let u=i[p],m=r[p];for(let c=0;c<u.length;c++)n+=(isNaN(u[c])?u[c]:y(u[c],m[c],o(l)))+" ";a=n.trim()}return a}},Rt=(t,e)=>t.setAttribute("d",e),it={cb:Xt,setValue:Rt};var Jt=(t,{el:e,easing:s})=>{let i=e.getTotalLength(),r={s:t[0]*i,e:t[1]*i,ease:t[2]?h(t[2]):s};return r.lerp=r.e-r.s,o=>`${r.s+r.lerp*r.ease(o)}`},Gt=(t,e)=>t.style.strokeDasharray=e,rt={cb:Jt,setValue:Gt};var Kt=(t,{el:e,easing:s})=>{let i=e.getTotalLength();e.style.strokeDasharray=i;let r={s:t[1]*i,e:t[0]*i,ease:t[2]?h(t[2]):s};return r.lerp=r.e-r.s,o=>`${r.s+r.lerp*r.ease(o)}`},Qt=(t,e)=>t.style.strokeDashoffset=e,ot={cb:Kt,setValue:Qt};var nt=t=>{let e=[],s=t.split(" "),i=s.length;for(let r=0;r<i;r++){let o=s[r].split(","),l=o.length;for(let n=0;n<l;n++){let a=o[n];e.push(isNaN(a)?a:+a)}}return e},Ut=(t,{el:e,easing:s})=>{let i=nt(e.getAttribute("points")),r=nt(t[0]),o=t[1]?ease(t[1]):s;return l=>{let n="",a="";for(let p=0;p<i.length;p++)n+=y(i[p],r[p],o(l))+" ",a=n.trim();return a}},Zt=(t,e)=>t.setAttribute("points",e),lt={cb:Ut,setValue:Zt};var ht=(t,e,s,i)=>{let r={s:t?t[1]=="px"?e:e/parseFloat(s)*100:e,e:t?t[0]:e,unit:t&&t[1]?t[1]:"px"};return r.lerp=r.e-r.s,t?r.ease=t[2]?h(t[2]):i:r.ease=h("l"),o=>`${r.s+r.lerp*r.ease(o)}${r.unit}`},at=(t,e,s)=>{let i={s:e,e:t?t[0]:e};return i.lerp=i.e-i.s,t?i.ease=t[1]?h(t[1]):s:i.ease=h("l"),r=>`${i.s+i.lerp*i.ease(r)}`},pt=(t,e)=>{let s={s:t?t[0]:0,e:t?t[1]:0};return s.lerp=s.e-s.s,t?s.ease=t[1]?h(t[1]):e:s.ease=h("l"),i=>`${s.s+s.lerp*s.ease(i)}deg`},te=t=>{let e=t.match(/^matrix3d\((.+)\)$/),s=t.match(/\((.+)\)$/);return e?(s=e[1].split(", "),s=[s[0],s[1],s[4],s[5],s[12],s[13]]):s&&(s=s[1].split(", ")),s},ee=(t,{transform:e,width:s,height:i,easing:r})=>{let o=te(e),l=ht(t.x,o?+o[4]:0,s,r),n=ht(t.y,o?+o[5]:0,i,r),a=at(t.sx,o?+o[0]:1,r),p=at(t.sy,o?+o[3]:1,r),u=pt(t.rx,r),m=pt(t.ry,r);return c=>`translate3d(${l(c)}, ${n(c)}, 0) scale(${a(c)}, ${p(c)}) rotateX(${u(c)}) rotateY(${m(c)})`},se=(t,e)=>t.style.transform=e,ct={cb:ee,setValue:se};var ie=(t,{parent:e,top:s,easing:i})=>{let r;if(s==="auto")r={s:0,e:t[0],unit:t[1]||"px"};else{let o=parseFloat(s);r={s:t[1]==="px"?o:o/V(e).h*100,e:t[0],unit:t[1]||"px"}}return r.lerp=r.e-r.s,r.ease=t[2]?h(t[2]):i,o=>`${r.s+r.lerp*r.ease(o)}${r.unit}`},re=(t,e)=>t.style.top=e,ft={cb:ie,setValue:re};var oe=(t,{parent:e,width:s,easing:i})=>{let r=parseFloat(s),o={s:t[1]==="px"?r:r/e.clientWidth*100,e:t[0],unit:t[1]==="px"?"px":"%",ease:t[2]?h(t[2]):i};return o.lerp=o.e-o.s,l=>`${o.s+o.lerp*o.ease(l)}${o.unit}`},ne=(t,e)=>t.style.width=e,ut={cb:oe,setValue:ne};var le=(t,{parent:e,height:s,easing:i})=>{let r=parseFloat(s),o={s:t[1]==="px"?r:r/e.clientHeight*100,e:t[0],unit:t[1]==="px"?"px":"%",ease:t[2]?h(t[2]):i};return o.lerp=o.e-o.s,l=>`${o.s+o.lerp*o.ease(l)}${o.unit}`},he=(t,e)=>t.style.height=e,dt={cb:le,setValue:he};var ae=(t,{clipPath:e,easing:s})=>{let i=e.match(/circle\((.*?) at/),r=e.match(/at (.*?)\)/),o=parseFloat(i[1]),l=r[1].split(" ").map(parseFloat),n={s:[o,l],e:[parseFloat(t[0]),t[1]],ease:t[2]?h(t[2]):s},a=n.e[0]-n.s[0],p=n.e[1][0]-n.s[1][0],u=n.e[1][1]-n.s[1][1];return m=>{let c=n.ease(m);return`circle(${n.s[0]+a*c}% at ${n.s[1][0]+p*c}% ${n.s[1][1]+u*c}%)`}},pe=(t,e)=>t.style.clipPath=e,mt={cb:ae,setValue:pe};var gt=t=>t.replace(/^polygon\(|\)$/g,"").split(",").map(e=>e.trim().split(" ").map(parseFloat)),ce=(t,{clipPath:e,easing:s})=>{let i={s:gt(e),e:gt(t[0]),ease:t[1]?h(t[1]):s};return i.lerp=i.e.map((r,o)=>[r[0]-i.s[o][0],r[1]-i.s[o][1]]),r=>{let o=i.ease(r);return`${i.s.map((l,n)=>`${l[0]+i.lerp[n][0]*o}% ${l[1]+i.lerp[n][1]*o}%`).join(", ")}`}},fe=(t,e)=>t.style.clipPath=`polygon(${e})`,yt={cb:ce,setValue:fe};var ue=[[/^(move)$/,ct],[/^(a)$/,tt],[/^(width)$/,ut],[/^(height)$/,dt],[/^(top)$/,ft],[/^(blur)$/,et],[/^(draw)$/,ot],[/^(dash)$/,rt],[/^(points)$/,lt],[/^(d)$/,it],[/^(circle)$/,mt],[/^(polygon)$/,yt]],O=ue;function I(t){let e=O.length;for(let s=0;s<e;s++){let i=O[s];if(t.match(i[0]))return i[1]}}function de(t,e,s,i){let r=E(t);r.el=t,r.parent=t.parentNode,r.easing=i;for(let o of Object.entries(e)){let l=I(o[0]),n=l.cb(o[1],r);s.push({setV:l.setValue,cb:n})}}function me(t,e,s,i){for(let r in e){let o={s:t[r],e:e[r][0],ease:e[r][1]?h(e[r][1]):i};o.lerp=o.e-o.s,s.push({setV:(l,n)=>l[r]=n,cb:l=>o.s+o.lerp*o.ease(l)})}}function ge(t,e,s,i){let r=[];return e?me(t,s,r,i):de(t,s,r,i),r}var z=ge;var W=class{#t={};create(e){this.#t[e]={items:[],id:0};function s(){let r=this[e],o=Array.prototype.slice.call(arguments);for(let l=0;l<r.items.length;l++)r.items[l].cb(...o)}let i=r=>this.#t[r].items=[];return{cb:s.bind(this.#t),name:e,r:i.bind(this,e)}}subscribe(e,s){this.#t[e]||console.error(e);let i=this.#t[e].items,r=++this.#t[e].id,o={cb:s,id:r,subscribed:!0};i.push(o);let l=n=>{for(let a=0;a<i.length;a++)i[a].id===n.id&&(i[a].subscribed=!1,i.splice(a,1))};return{onChange:n=>(o.cb=n,{r:()=>l(o),item:o})}}check(e){return!!this.#t[e]}},f=new W;var A=class{constructor(){}init(e){this.raf||(f.subscribe("visibilitychange").onChange(this.#t.bind(this)),this.raf=e)}#t(){let e=performance.now();document.hidden?this.hide=e:this.raf.items.map(s=>s.st+=e-this.hide)}},bt=new A;var j=class{constructor(){this.items=[],this.id=-1}push(e){return e.id=++this.id,this.items.push(e),this.on||(this.loop(),bt.init(this)),e.id}update(e){for(let s=0;s<this.items.length;s++){let i=this.items[s];if(i.d){i.st||(i.st=e);let r=(e-i.st)/(i.d*1e3),o=d(0,1,r);i.cb(o),o===1&&this.kill(i.id)}else i.cb(e)}this.loop()}kill(e){this.items.map((s,i)=>{s.id===e&&(s.id=null,s.st=null,this.items.splice(i,1))})}loop(){this.items.length===0?(this.on=!1,window.cancelAnimationFrame(this.raf)):(this.on=!0,this.raf=window.requestAnimationFrame(this.update.bind(this)))}},ye=new j,b=ye;function wt(t){let e=document.createElement("section"),s={start:0,end:0,lerp:.75};e.style.cssText=` position: fixed; height: 32px; width: 32px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #333; color: #fff; border-radius: 50%; pointer-events: none; `,f.add("pointermove").onChange(i=>{let r=H(i.pageX/k.screen.w);e.style.top=i.pageY+-30+"px",e.style.left=i.pageX+-30*r+"px",e.textContent=r,s.start=d(0,.99999,r)}),f.add("raf",()=>{s.end=y(s.start,s.end,s.lerp),t(s.end)}),document.body.appendChild(e)}var v=class{constructor({d:e,o:s,cb:i}){this.d=e||0,this.o=s,this.cb=i,this.on=!1}play(){this.on=!0,this.d===0?this.Elp():this.id=b.push({cb:this.loop.bind(this),d:this.d})}destroy(){b.kill(this.id),this.on=!1}loop(e){e===1&&this.Elp()}Elp(){this.on=!1,this.o&&b.push(this.o),this.cb&&this.cb()}};function B(t){this.isObj=!1,t instanceof Node?this.target=t:typeof t=="string"?this.target=g.el(t):(this.isObj=!0,this.target=t)}var vt=new Map;function X(t,e){let s=vt.get(t);return s||(vt.set(t,e),e.init(t),e)}var be=(t,e)=>T(t)===T(e),xt=be;var R=class{constructor(e){return X(e,this)}init(e){B.call(this,e),this.call=-1,this.props=[],this.queue=[],this.prog=0,this.elapsed=0}run(e){this.on=!0,this.elapsed=d(0,1,this.prog+e);let s=Math.abs(this.dir-this.elapsed),i=Math.abs(s-this.from);this.props.map(({setV:r,cb:o})=>r(this.target,o(i))),this.raf&&this.raf(s,this.target),this.elapsed===1&&this.finished()}push(e){this.destroy(),this.dir=e.dir,this.mode=e.mode,this.from=e.from?1:0,this.started&&(this.started(this.target),this.started=null),e.oProps?(this.oProps=e.oProps,this.props=z(this.target,this.isObj,e.oProps,h(e.ease)),this.prog=0):this.prog=1-this.elapsed,this.rafObj={cb:this.run.bind(this),d:e.d},this.id=b.push(this.rafObj)}control(){let e=this.queue[this.call];xt(this.oProps,e.oProps)?e.oProps=void 0:(this.late=new v({cb:this.push.bind(this,e),d:e.late}),this.late.play()),this.mode!==e.mode&&(this.late.on&&this.late.destroy(),this.late=new v({cb:this.push.bind(this,e),d:e.late}),this.late.play())}play(e,s){this.call++,this.started=e.started,this.completed=e.completed,this.raf=e.raf,this.queue.push({d:e.d,late:e.late,ease:e.ease,oProps:e.p,mode:s,from:e.from,dir:s==="r"?1:0}),this.control()}destroy(){this.on=!1,b.kill(this.id)}finished(){this.destroy(),this.completed&&(this.completed(this.target),this.completed=null,this.raf=null)}},Mt=R;var $t=(t,e,s)=>{let i={...t};return e!==0&&(i.started=null,i.raf=null),e!==s&&(i.completed=null),i.late=t.late+t.space*e,i},Vt=(t,e)=>{e.d=typeof t.d=="number"?t.d:e.d||.5,e.late=typeof t.late=="number"?t.late:e.late||0,e.space=typeof t.space=="number"?t.space:e.space||0,e.ease=t.ease?t.ease:e.ease||"l",e.p=t.p};function we(t,e){let s;Array.isArray(t)&&typeof t[0]!="number"?s=t:s=[t];let i=s.map(l=>new Mt(l)),r=i.length-1,o={reverse:(l={})=>{Vt(l,e);for(let n=0;n<=r;n++){let a=r-n;i[n].play($t(e,a,r),"r")}},play:(l={})=>{Vt(l,e),i.map((n,a)=>n.play($t(e,a,r),"p"))},destroy:()=>i.map(l=>l.late.destroy()),tweens:i};return o.play(e),o}var J=we;var $=(t="+0",e)=>{let s;if(Array.isArray(t))return s=Y(t[0]).y+t[1],s;if(s=t.toString().match(/(\+|\-)(.*)/),s[1]==="+")return e+ +s[2];if(s[1]==="-")return e-+s[2]},G=class{constructor(e,s){this.el=e,this.target=s.target,this.o=s,this.pin=s.pin,this.scroll=s.scroll,this.from=s.from?1:0,this.dir=s.dir,this.dirE=s.dir==="y"?"yE":"xE",this.Init(s)}Init(e){e.target||(this.target=this.el),e.scroll&&(this.ps=z(this.target,!1,e.p)),e.pin&&(this.pin.target=e.pin.target||this.target),this.iraf=f.subscribe(e.obsname).onChange(this.raf.bind(this)),this.iresize=f.subscribe("resize").onChange(this.resize.bind(this)),this.resize()}resize(){let e=this.el.length?this.el[0]:this.el,s=Y(e);this.scroll?(this.startpint=$(this.scroll.start,s[this.dir]),this.endpoint=$(this.scroll.end,s[this.dirE])):(this.startpint=$(this.o.start,s[this.dir]),this.endpoint=$(this.o.end,s[this.dirE])),this.pin&&(this.pin.start=$(this.pin.a,s[this.dir]),this.pin.end=$(this.pin.z,s[this.dirE]))}raf(e){if(this.coord=e.lerp,this.o.scroll){let s=P(this.startpint,this.endpoint,this.coord);this.onScroll(s),this.o.pin&&this.piner(),this.o.raf&&this.o.raf(s,this.target,this.coord)}else this.startpint<=this.coord&&this.fire()}onScroll(e){let s=Math.abs(e-this.from);this.ps.map(i=>{this.target.length?this.target.forEach(r=>i.setV(r,i.cb(s))):i.setV(this.target,i.cb(s))})}fire(){this.o.tween&&J(this.target,this.o.tween),this.o.completed&&this.o.completed(this.target),this.destroy()}piner(){if(this.pined&&!(this.coord>=this.pin.end)){let e=Math.max(0,this.coord-this.pin.pxS);this.pin.target.style.transform=`translate3d(${this.dir?"0px,"+e+"px":e+"px,0px"},0px)`}this.coord<this.pin.start?this.pined=!1:this.coord>=this.pin.start&&!this.pined&&(this.pin.pxS=this.coord,this.pined=!0)}destroy(){this.iraf.r(),this.iresize.r()}},Et=G;var S=class{constructor(e,s){this.options=s,this.attacher=e,this.target=s.target,this.observer=f.create(s.obs||Symbol("foo")),this.dir=s.dir?s.dir:"y",this.isY=this.dir==="y",this.pageDir=this.isY?"pageY":"pageX",this._events(s),this.chokeEl=g.id("overlay"),this.choke=new M({d:.3,cb:()=>w.pointer(this.chokeEl,"none")}),this.dist=0,this.scroll={value:0,lerp:0,dir:1}}_events(e){Object.is(this.attacher,window)?(e.drag!==!1&&(this.ipointerdown=f.subscribe("pointerdown").onChange(this._down.bind(this)),this.ipointermove=f.subscribe("pointermove").onChange(this._move.bind(this))),e.key!==!1&&(this.ikey=f.subscribe("keydown").onChange(this._onkey.bind(this))),e.wheel!==!1&&(this.iwheel=f.subscribe("wheel").onChange(this._wheel.bind(this))),this.global=!0):(e.wheel!==!1&&(this.attacher.onwheel=this._wheel.bind(this)),e.drag!==!1&&(this.attacher.onpointerdown=this._down.bind(this),this.attacher.onpointermove=this._move.bind(this))),this.ipointerup=f.subscribe("pointerup").onChange(this._up.bind(this)),this.iresize=f.subscribe("resize").onChange(this._resize.bind(this))}_wheel(e){let s=e.deltaMode===1?.83:.55,i=e.wheelDeltaY*s;this.scroll.value-=i,this.scroll.dir=Math.sign(i)}_onkey(e){if(e.key==="Tab")e.preventDefault();else if(e.keyCode===40||e.keyCode===38){let s=0;e.keyCode===40?s=-66.6:e.keyCode===38&&(s=66.6),this.scroll.value-=s}}_down(e){this.mousedown=!0,this.dist=e[this.pageDir]}_move(e){if(this.mousedown){let s=e[this.pageDir]-this.dist;this.scroll.value-=s,this.dist=e[this.pageDir],this.scroll.dir=Math.sign(s),this.global&&w.pointer(this.chokeEl,"all")}}_up(){this.mousedown=!1,this.choke.run()}_destroy(){this.iraf.r(),this.iresize.r(),this.global?(this.ipointerdown&&(this.ipointerdown.r(),this.ipointermove.r()),this.ikey&&this.ikey.r(),this.iwheel&&this.iwheel.r()):(this.options.wheel!==!1&&(this.attacher.onwheel=null),this.options.drag!==!1&&(this.attacher.onpointerdown=null,this.attacher.onpointermove=null)),this.ipointerup.r(),this.observer.r()}};var F=(t,e,s)=>{s?w.form(t,"px",0,e):w.form(t,"px",e,0)},kt=(t,e,s,i,r,o)=>{t<=s.z&&e>=s.a?(F(i,-o,r),s.out=!1):s.out||(F(i,-o,r),s.out=!0)},K=class extends S{constructor(e,s){super(e,s),this.infinite=s.infinite,this.ease=s.ease||.09,this.speed={time:performance.now(),offset:0,value:0,ease:s.speed||.3},this._resize(),this.iraf=f.subscribe("raf").onChange(this._raf.bind(this))}add(e,s){return s.obsname=this.observer.name,s.dir=this.dir,new Et(e,s)}_raf(e){this.infinite||(this.scroll.value=d(0,this.dim,this.scroll.value)),this.scroll.lerp=C(this.scroll.lerp,this.scroll.value,this.ease),this.speed.time=e-this.speed.time,this.speed.offset=this.scroll.lerp-this.speed.offset,this.speed.value=C(this.speed.value,this.speed.offset/this.speed.time,this.speed.ease),this.infinite?(this.scroll.lerp>this.dim?(this.scroll.value=this.scroll.value-this.dim,this.scroll.lerp=this.scroll.lerp-this.dim):this.scroll.lerp<0&&(this.scroll.value=this.dim+this.scroll.value,this.scroll.lerp=this.dim+this.scroll.lerp),this.infinite.map(([s,i])=>{let r=this.scroll.lerp,o=r+this.screen;if(this.scroll.lerp>this.dim-this.screen){let l=this.scroll.lerp-(this.dim-this.screen)-this.screen,n=l+this.screen;l<=i.z&&n>=i.a?F(s,this.screen-n,this.isY):kt(r,o,i,s,this.isY,this.scroll.lerp)}else kt(r,o,i,s,this.isY,this.scroll.lerp)})):F(this.target,-this.scroll.lerp,this.isY),this.speed.time=e,this.speed.offset=this.scroll.lerp,this.observer.cb(this.scroll)}_resize(){if(this.bs=V(this.target),this.infinite){let s=[...this.target.children];this.infinite=s.map(i=>{let r=this.isY?i.offsetTop:i.offsetLeft,o=this.isY?i.offsetHeight:i.offsetWidth;return[i,{a:r,z:r+o}]})}let e=this.isY?"h":"w";this.screen=k.screen[e],this.dim=this.bs[e]-(this.infinite?0:this.screen)}},ve=K;var D=" ";function xe(t,e){document.body.append(t),t.style.visibility="hidden",t.style.position="absolute",t.style.whiteSpace="nowrap",t.style.fontFamily=e.getPropertyValue("font-family"),t.style.fontSize=e.getPropertyValue("font-size"),t.style.fontWeight=e.getPropertyValue("font-weight"),t.style.textTransform=e.getPropertyValue("text-transform"),t.style.letterSpacing=e.getPropertyValue("letter-spacing"),t.style.lineHeight=e.getPropertyValue("line-height")}function zt(t){let e=t.childNodes,s=[];for(let i=0;i<e.length;i++)s.push(Me(e[i]));return s}function Me(t){let e;return t.nodeType===3?e={value:t.nodeValue.split(" "),type:3}:e={value:zt(t),type:1,node:t},e}function St(t){for(let e=0;e<t.length;e++){let s=t[e];if(s.type===3){let i=[];for(let r=0;r<s.value.length;r++)s.value[r]=s.value[r].replace(/\n/g,""),s.value[r]!==""&&i.push(s.value[r]);s.value=i}else St(s.value)}}function _t(t,e,s){if(s.words){let i=t.words.length,r;s.ltrs?r=t.words.reduce((o,l,n)=>{let a="";for(let p=0;p<l.length;p++)a+=_(l[p],3);return o+_(a+(n==i-1?"":D),2)},""):r=t.words.reduce((o,l,n)=>o+_(l+(n==i-1?"":D),2),""),e.push({line:_(r,1)})}else e.push({line:_(t.value,1)})}function _(t,e){if(e===1)return`<div class="tfx"><span>${t}</span></div>`;if(e===2)return`<span class="word">${t}</span>`;if(e===3)return`<span class="ltr">${t}</span>`}function $e(t,e,s,i,r,o){for(let l=0;l<t.length;l++){let n=t[l];e.value+=n,s.innerHTML=e.value,e.words.push(n),s.offsetWidth>i&&(e.words.pop(),_t(e,r,o),e.value=n,e.words=[n+D]),e.value+=D}}function Ve(t,e,s,i){let r={value:"",words:[]},o=[];for(let l=0;l<t.length;l++){let n=t[l];n.type===3&&$e(n.value,r,e,s,o,i)}return _t(r,o,i),o}function Ee(t,e){let s=E(t),i=document.createElement("div");e.ltrs&&(e.words=!0),xe(i,s);let r=t.offsetWidth,o=zt(t);St(o);let l=Ve(o,i,r,e);return t.innerHTML="",document.body.removeChild(i),l.map(({line:n})=>t.innerHTML+=n),{lines:g.sEls(t,".tfx"),words:g.sEls(t,".word"),ltrs:g.sEls(t,".ltr")}}var ke=Ee;export{V as bounds,M as choke,d as clamp,E as computed,w as css,C as damp,Yt as dist,h as ease,Ft as isHas,v as late,y as lerp,ke as line,P as map,f as observer,Y as offset,z as props,g as query,b as raf,Tt as remap,H as round,ve as scroll,wt as scrub,T as toString,J as tween,k as win};
